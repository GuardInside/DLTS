#ifndef FACILITY_H_INCLUDED
#define FACILITY_H_INCLUDED
#include <string>
#include <sstream>
#include <fstream>
#include <cmath>
#include <windows.h>
#include <commctrl.h>
#include <iomanip>
#include <commdlg.h>
#include "vi.h"
#include "daq.h"
#include <dlts_math.h>
#include "resource.h"
#include "gwin.h"
#include "variable.h"
using namespace std;

stringstream&   rewrite(stringstream& buff);
UINT            GetDlgItemTextMod(HWND hwnd, int nIDItem, stringstream& str_buf);
double          ApplySettingEditBox(HWND hwnd, int nIDEditBox, int prec = 0);
string          ApplySettingEditBoxString(HWND hwnd, int nIDEditBox);
bool            EmptyEditBox(HWND hwnd, int nIDEditBox);

//Запись/Чтение настроек
void write_settings();
void read_settings();
//Применяет текущие настройки зон к физическому устройству
void SetZones();
//Инициализация сборщика данных, термостата и зон для PID регулировки
void ApplySettings();
//Загружает Save-файл с усредненными сигналами релаксаций, строит DLTS-кривые и график Аррениуса
UINT CALLBACK DownloadFile(void*);
UINT CALLBACK SaveFile(void*);
//Очистка векторов осей DLTS-кривых
void ClearMemmoryDLTS();
void ClearMemmory();
//Обновление DLTS-кривых
void RefreshDLTS();
void SaveRelaxSignal(double MeanTemp, const vector<double> vData, double dVoltMin, double dVoltMax);
void AddPointsDLTS(double temp);
/* Возвращает расширение открытого файла */
string GetExtensionFile(char*, int);

#endif // FACILITY_H_INCLUDED
